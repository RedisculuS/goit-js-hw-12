{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\n\nimport axios from 'axios';\n\nconst API_KEY = '43967749-ce2f7a1bd8d115ad659da346f';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: perPage,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data.hits;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}","'use strict';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport simpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox;\nconst loader = document.getElementById('loader');\nconst gallery = document.querySelector('.gallery');\n  const loadmoreBtn = document.querySelector('.load-more');\n\n// loader.className = 'loader';\n// loader.textContent = \"Loading...\"\n// document.body.appendChild(loader);\n\nexport function renderImages(images, append = false) {\n\n  const imageMarkup = images\n    .map(\n      img => `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${img.webformatURL}\">\n        <img \n          class=\"gallery-image\" \n          width=\"360\"\n          src=\"${img.largeImageURL}\" \n          alt=\"${img.tags}\" \n          />\n          \n      </a>\n      <ul class='description'>\n      <li><strong>Likes</strong> ${img.likes}</li>\n      <li><strong>Views</strong> ${img.views}</li>\n      <li><strong>Comments</strong> ${img.comments}</li>\n      <li><strong>Downloads</strong> ${img.downloads}</li>\n      </ul>\n    </li>`\n    )\n    .join('');\n    \n  if (append) {\n    gallery.insertAdjacentHTML(\"beforeend\", imageMarkup);\n  } else {\n    gallery.innerHTML = imageMarkup;\n  }\n    \n  initializeLightbox();\n   \n}\n\nexport function showError(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n  });\n}\n\nexport function showLoader() {\n  loader.style.display = 'block';\n  loadmoreBtn.insertAdjacentElement('afterend', loader);\n}\n\nexport function hideLoader() {\n  loader.style.display = 'none';\n}\n\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nfunction initializeLightbox() {\n  if (lightbox) {\n    lightbox.destroy();\n  }\n  lightbox = new simpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n}\n\nexport function refreshLightbox() {\n  if (lightbox) {\n    lightbox.refresh();\n  } \n}\n\nexport function showLoaderBtn() {\n  loadmoreBtn.style.display = 'block';\n}\n\nexport function hideLoaderBtn() {\n  loadmoreBtn.style.display = 'none';\n}","'use strict';\n\nimport { fetchImages } from './js/pixabay-api';\n// import { renderImages, showError, clearGallery, showLoader, hideLoader, initializeLightbox, refreshLightbox } from './js/render-functions';\nimport { renderImages, showError, clearGallery, showLoader, hideLoader , refreshLightbox, showLoaderBtn, hideLoaderBtn} from './js/render-functions';\n\n\nconst form = document.querySelector('.form');\nconst searchInput = document.querySelector('.search-img-input');\nconst loadmoreBtn = document.querySelector('.load-more');\n// document.body.appendChild(loadmoreBtn);\n\nlet query = '';\nlet page = 1;\n\nform.addEventListener('submit', handleSubmit);\nloadmoreBtn.addEventListener('click', handleLoadMore);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n\n  query = searchInput.value.trim();\n  page = 1;\n\n  if (!query) {\n    showError('Please enter a search term');\n    return;\n  }\n  \n  // gallery.innerHTML = '';\n  clearGallery();\n  hideLoaderBtn();\n  showLoader();\n  \n  try {\n    const images = await fetchImages(query, page);\n    hideLoader();\n    if (images.length === 0) {\n      showError(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n    } else {\n          renderImages(images);\n          // initializeLightbox();\n          // refreshLightbox();\n          showLoaderBtn();\n    }\n  } catch (error) {\n    hideLoader();\n      showError('An error occured while fetching images');\n      console.error(error);\n    }\n}\n\nasync function handleLoadMore(event) {\n  page += 1;\n  showLoader();\n\n  try {\n    const images = await fetchImages(query, page);\n    hideLoader();\n    if (images.length === 0) {\n      showError(\n        'No more images found'\n      );\n      hideLoaderBtn();\n    } else {\n          renderImages(images, true);\n          refreshLightbox();\n    }\n  } catch (error) {\n      hideLoader();\n      showError('An error occured while fetching more images');\n      console.error(error);\n    }\n}\n\n\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","params","axios","error","lightbox","loader","gallery","loadmoreBtn","renderImages","images","append","imageMarkup","img","initializeLightbox","showError","message","iziToast","showLoader","hideLoader","clearGallery","simpleLightbox","refreshLightbox","showLoaderBtn","hideLoaderBtn","form","searchInput","handleSubmit","handleLoadMore","event"],"mappings":"owBAIA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,MAAMC,EAAS,CACb,IAAKN,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACd,EAEE,GAAI,CAEF,OADiB,MAAME,EAAM,IAAIN,EAAU,CAAE,OAAAK,CAAM,CAAE,GACrC,KAAK,IACtB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,CCnBA,IAAIC,EACJ,MAAMC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAU,SAAS,cAAc,UAAU,EACzCC,EAAc,SAAS,cAAc,YAAY,EAMlD,SAASC,EAAaC,EAAQC,EAAS,GAAO,CAEnD,MAAMC,EAAcF,EACjB,IACCG,GAAO;AAAA,sCACyBA,EAAI,YAAY;AAAA;AAAA;AAAA;AAAA,iBAIrCA,EAAI,aAAa;AAAA,iBACjBA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,mCAKUA,EAAI,KAAK;AAAA,mCACTA,EAAI,KAAK;AAAA,sCACNA,EAAI,QAAQ;AAAA,uCACXA,EAAI,SAAS;AAAA;AAAA,UAG/C,EACA,KAAK,EAAE,EAENF,EACFJ,EAAQ,mBAAmB,YAAaK,CAAW,EAEnDL,EAAQ,UAAYK,EAGtBE,GAEF,CAEO,SAASC,EAAUC,EAAS,CACjCC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,CACb,CAAG,CACH,CAEO,SAASE,GAAa,CAC3BZ,EAAO,MAAM,QAAU,QACvBE,EAAY,sBAAsB,WAAYF,CAAM,CACtD,CAEO,SAASa,GAAa,CAC3Bb,EAAO,MAAM,QAAU,MACzB,CAGO,SAASc,GAAe,CAC7Bb,EAAQ,UAAY,EACtB,CAEA,SAASO,GAAqB,CACxBT,GACFA,EAAS,QAAO,EAElBA,EAAW,IAAIgB,EAAe,aAAc,CAC1C,aAAc,MACd,aAAc,GAClB,CAAG,CACH,CAEO,SAASC,GAAkB,CAC5BjB,GACFA,EAAS,QAAO,CAEpB,CAEO,SAASkB,GAAgB,CAC9Bf,EAAY,MAAM,QAAU,OAC9B,CAEO,SAASgB,GAAgB,CAC9BhB,EAAY,MAAM,QAAU,MAC9B,CCrFA,MAAMiB,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAc,SAAS,cAAc,mBAAmB,EACxDlB,EAAc,SAAS,cAAc,YAAY,EAGvD,IAAIT,EAAQ,GACRC,EAAO,EAEXyB,EAAK,iBAAiB,SAAUE,CAAY,EAC5CnB,EAAY,iBAAiB,QAASoB,CAAc,EAEpD,eAAeD,EAAaE,EAAO,CAMjC,GALAA,EAAM,eAAc,EAEpB9B,EAAQ2B,EAAY,MAAM,OAC1B1B,EAAO,EAEH,CAACD,EAAO,CACVgB,EAAU,4BAA4B,EACtC,MACD,CAGDK,IACAI,IACAN,IAEA,GAAI,CACF,MAAMR,EAAS,MAAMZ,EAAYC,EAAOC,CAAI,EAC5CmB,IACIT,EAAO,SAAW,EACpBK,EACI,0EACV,GAEUN,EAAaC,CAAM,EAGnBa,IAEP,OAAQnB,EAAO,CACde,IACEJ,EAAU,wCAAwC,EAClD,QAAQ,MAAMX,CAAK,CACpB,CACL,CAEA,eAAewB,EAAeC,EAAO,CACnC7B,GAAQ,EACRkB,IAEA,GAAI,CACF,MAAMR,EAAS,MAAMZ,EAAYC,EAAOC,CAAI,EAC5CmB,IACIT,EAAO,SAAW,GACpBK,EACE,sBACR,EACMS,MAEIf,EAAaC,EAAQ,EAAI,EACzBY,IAEP,OAAQlB,EAAO,CACZe,IACAJ,EAAU,6CAA6C,EACvD,QAAQ,MAAMX,CAAK,CACpB,CACL"}